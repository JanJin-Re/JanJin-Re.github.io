<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>สถานะห้องพักและราคา</title>
    <script src="https://www.gstatic.com/firebasejs/9.18.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.18.0/firebase-database.js"></script>
    <style>
        /* สไตล์ที่เหมือนเดิม */
    </style>
</head>
<body>

<h1>สถานะห้องพักและราคา</h1>

<button id="adminToggleBtn" class="toggle-btn" onclick="toggleAdminMode()">เข้าสู่โหมดผู้ดูแล</button>

<table>
    <thead>
        <tr>
            <th>ห้อง</th>
            <th>สถานะ</th>
            <th>
                <div class="price-header">
                    ราคา
                    <span>(บาท/คืน)</span>
                </div>
            </th>
            <th class="admin-only">อัพเดทสถานะ</th>
        </tr>
    </thead>
    <tbody id="room-status">
        <!-- เพิ่มห้องพักต่างๆ ที่นี่ -->
    </tbody>
</table>

<div id="loginModal">
    <div id="loginForm">
        <h2>เข้าสู่ระบบผู้ดูแล</h2>
        <input type="email" id="email" placeholder="อีเมล" required>
        <input type="password" id="password" placeholder="รหัสผ่าน" required>
        <button onclick="login()">เข้าสู่ระบบ</button>
        <button id="cancelBtn" onclick="closeLoginModal()">ยกเลิก</button>
    </div>
</div>

<script>
    // การตั้งค่า Firebase
    const firebaseConfig = {
        apiKey: "YOUR_API_KEY",
        authDomain: "YOUR_AUTH_DOMAIN",
        databaseURL: "YOUR_DATABASE_URL",
        projectId: "YOUR_PROJECT_ID",
        storageBucket: "YOUR_STORAGE_BUCKET",
        messagingSenderId: "YOUR_SENDER_ID",
        appId: "YOUR_APP_ID"
    };

    // เริ่มต้น Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    let isAdmin = false;

    function openLoginModal() {
        // ฟังก์ชันเปิด modal ล็อกอิน
    }

    function closeLoginModal() {
        // ฟังก์ชันปิด modal ล็อกอิน
    }

    function login() {
        // ฟังก์ชันล็อกอิน
    }

    function toggleAdminMode() {
        if (isAdmin) {
            isAdmin = false;
            document.body.classList.remove("show-admin");
            document.getElementById("adminToggleBtn").textContent = "เข้าสู่โหมดผู้ดูแล";
        } else {
            openLoginModal();
        }
    }

    function updateStatus(button) {
        const row = button.closest('tr');
        const statusCell = row.querySelector('.status');
        const roomNumber = row.querySelector('td:first-child').textContent;

        const newStatus = statusCell.classList.contains('available') ? 'unavailable' : 'available';
        const newPrice = newStatus === 'available' ? 500 : 0; // เปลี่ยนแปลงราคาตามสถานะ

        statusCell.textContent = newStatus === 'available' ? 'ว่าง' : 'ไม่ว่าง';
        statusCell.classList.toggle('available', newStatus === 'available');
        statusCell.classList.toggle('unavailable', newStatus === 'unavailable');

        // อัปเดตสถานะใน Firebase
        const roomData = { status: newStatus === 'available' ? 'ว่าง' : 'ไม่ว่าง', price: newPrice };
        database.ref('rooms/' + roomNumber).set(roomData);
    }

    // ฟังก์ชันโหลดสถานะห้อง
    function loadRoomStatus() {
        const roomsRef = database.ref('rooms');
        roomsRef.on('value', (snapshot) => {
            const roomData = snapshot.val();
            const roomStatusTable = document.getElementById('room-status');
            roomStatusTable.innerHTML = ''; // เคลียร์ตารางก่อน
            for (const room in roomData) {
                const { status, price } = roomData[room];
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${room}</td>
                    <td class="status ${status === 'ว่าง' ? 'available' : 'unavailable'}">${status}</td>
                    <td>${price}</td>
                    <td class="admin-only"><button onclick="updateStatus(this)">อัพเดท</button></td>
                `;
                roomStatusTable.appendChild(row);
            }
        });
    }

    // โหลดสถานะห้องเมื่อหน้าเว็บถูกโหลด
    window.onload = () => {
        loadRoomStatus();
    };
</script>

</body>
</html>
